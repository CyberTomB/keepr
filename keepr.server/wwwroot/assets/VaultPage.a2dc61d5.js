import{a,D as e,c as t,p as i,h as s,E as l,G as r,e as o,o as c,b as n,d,m as u,t as v,l as p,F as m,q as k,j as P}from"./vendor.9dd95e55.js";import{v as g,l as y,k as f,A as h,P as w}from"./index.cb3e84ed.js";const V={setup(){const i=l(),s=a({loading:!1,isPrivate:!1}),o=r();return e((async()=>{s.loading=!0;const a=await g.getOne(o.params.id);a.isValid||(y.log("access:",a),i.push({name:"Home"})),s.isPrivate=a.isPrivate,await f.getAllByVault(o.params.id),s.loading=!1})),{state:s,isMobile:t((()=>h.isMobile)),keeps:t((()=>h.keeps)),vault:t((()=>h.activeVault)),returnToProfile(){i.push({name:"Profile",params:{id:h.activeVault.creatorId}})},creatorMatch:t((()=>h.account.id===h.activeVault.creatorId)),async togglePrivacy(){try{const a={id:o.params.id,isPrivate:!0,name:h.activeVault.name};if(await w.confirm(`Are you sure you want to make ${h.activeVault.name} ${h.activeVault.isPrivate?"public":"private"}?`,"","question","Yes")){a.isPrivate=!h.activeVault.isPrivate;const e=await g.edit(a);s.isPrivate=e.isPrivate}}catch(a){w.toast("Something went wrong","error")}},async deleteVault(){try{await w.confirm("Are you sure you want to delete this vault?")&&(await g.delete(o.params.id),i.push({name:"Profile",params:{id:h.account.id}}))}catch(a){w.toast(a,"error")}}}}},b=P();i("data-v-a5f0f9e0");const M={class:"container d-flex"},x={key:0,class:"row"},C=d("h1",null,"Loading...",-1),I={key:1,class:"row flex-grow-1 align-content-start"},T={class:"col-12"},z={id:"vault-title"},A={key:0},j={class:"f-18"},D={class:"col-12"},_={key:0,class:"col-12 card-columns"},q={key:1,class:"col-12 d-flex align-items-center h-50"},B=d("h4",null,[d("em",null,"This Vault has no keeps... :(")],-1);s();const G=b(((a,e,t,i,s,l)=>{const r=o("PrivacyIndicator"),P=o("IconLink"),g=o("KeepCard");return c(),n("div",M,[i.state.loading?(c(),n("div",x,[C])):(c(),n("div",I,[d("div",T,[d("h1",z,[u(v(i.vault.name)+" ",1),i.creatorMatch?(c(),n(r,{key:0,onMouseenter:e[1]||(e[1]=a=>i.state.isPrivate=!i.vault.isPrivate),onMouseleave:e[2]||(e[2]=a=>i.state.isPrivate=i.vault.isPrivate),class:"action px-1","is-private":i.state.isPrivate,title:"Toggle Privacy",onClick:i.togglePrivacy},null,8,["is-private","onClick"])):p("",!0),i.creatorMatch?(c(),n(P,{key:1,mdi:"delete",closed:"text-danger",open:"bg-danger",size:"1rem","wrap-size":"2.5rem","icon-size":"2rem",title:"Delete Vault",onClick:i.deleteVault},{default:b((()=>[i.isMobile?p("",!0):(c(),n("em",A," Â Delete Vault?"))])),_:1},8,["wrap-size","onClick"])):p("",!0)]),d("p",j,v(i.vault.description),1)]),d("div",D,[d("button",{class:"btn btn-info",onClick:e[3]||(e[3]=(...a)=>i.returnToProfile&&i.returnToProfile(...a))}," Go Back ")]),i.keeps.length>0?(c(),n("div",_,[(c(!0),n(m,null,k(i.keeps,(a=>(c(),n(g,{key:a.id,keep:a,"vault-view":i.creatorMatch},null,8,["keep","vault-view"])))),128))])):(c(),n("div",q,[B]))]))])}));V.render=G,V.__scopeId="data-v-a5f0f9e0";export default V;
